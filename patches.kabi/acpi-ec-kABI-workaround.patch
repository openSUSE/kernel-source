From: Takashi Iwai <tiwai@suse.de>
Subject: kABI workaround for struct acpi_ec
Patch-mainline: Never, kABI workaround
References: bsc#1207149

The struct acpi_ec is allocated dynamically (and locally), so it's
mostly safe to apply the standard kABI workaround to move the new
field at the tail with ifdef.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/acpi/internal.h |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

--- a/drivers/acpi/internal.h
+++ b/drivers/acpi/internal.h
@@ -168,7 +168,6 @@ static inline void acpi_early_processor_
    -------------------------------------------------------------------------- */
 struct acpi_ec {
 	acpi_handle handle;
-	acpi_handle address_space_handler_holder;
 	int gpe;
 	int irq;
 	unsigned long command_addr;
@@ -188,6 +187,9 @@ struct acpi_ec {
 	unsigned int queries_in_progress;	/* FIXME: for kABI */
 	bool busy_polling;
 	unsigned int polling_guard;
+#ifndef __GENKSYMS__
+	acpi_handle address_space_handler_holder;
+#endif
 };
 
 extern struct acpi_ec *first_ec;
