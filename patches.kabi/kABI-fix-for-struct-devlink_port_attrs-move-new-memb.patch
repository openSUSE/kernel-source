From d1efabbf87349edf31fef73c824ad12befea8cd3 Mon Sep 17 00:00:00 2001
From: Thomas Abraham <tabraham@suse.com>
Date: Wed, 20 Aug 2025 18:25:28 -0400
Subject: [PATCH] kABI: fix for struct devlink_port_attrs: move new member to
 the end
References: git-fixes
Patch-mainline: Never, kABI workaround

upstream commit c5ec7f49b480db0dfc83f395755b1c2a7c979920
("devlink: let driver opt out of automatic phys_port_name generation")
changes the layout of struct devlink_port_attrs.

Signed-off-by: Thomas Abraham <tabraham@suse.com>
Reviewed-by: Jan Kara <jack@suse.cz>
Signed-off-by: Yousaf Kaukab <ykaukab@suse.de>
---
 include/net/devlink.h |    7 +++++++
 1 file changed, 7 insertions(+)

--- a/include/net/devlink.h
+++ b/include/net/devlink.h
@@ -87,11 +87,18 @@ struct devlink_port_pci_sf_attrs {
  * @pci_pf: PCI PF port attributes
  * @pci_vf: PCI VF port attributes
  * @pci_sf: PCI SF port attributes
+ * @no_phys_port_name: skip automatic phys_port_name generation; for
+ *                     compatibility only, newly added driver/port instance
+ *                     should never set this.
  */
 struct devlink_port_attrs {
 	u8 split:1,
+#ifdef __GENKSYMS__
+	   splittable:1;
+#else
 	   splittable:1,
 	   no_phys_port_name:1;
+#endif
 	u32 lanes;
 	enum devlink_port_flavour flavour;
 	struct netdev_phys_item_id switch_id;
