From: Takashi Iwai <tiwai@suse.de>
Subject: pci: Revive pci_dev __aer_firmware_first* fields for kABI
Patch-mainline: Never, kABI compatibility fix
References: bsc#1174356

The upstream commit 708b20003624 ("PCI/AER: Remove HEST/FIRMWARE_FIRST
parsing for AER ownership") removed two unused fields from pci_dev
struct, and this broke kABI.

Revive those fields to keep the kABI compatibility.
They are just placeholders without actual usage.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 include/linux/pci.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/include/linux/pci.h
+++ b/include/linux/pci.h
@@ -418,6 +418,8 @@ struct pci_dev {
 	 * mappings to make sure they cannot access arbitrary memory.
 	 */
 	unsigned int	untrusted:1;
+	unsigned int	__aer_firmware_first_valid:1; /* XXX: no longer used, SLE-specific kABI placeholder */
+	unsigned int	__aer_firmware_first:1; /* XXX: no longer used, SLE-specific kABI placeholder */
 	unsigned int	broken_intx_masking:1;	/* INTx masking can't be used */
 	unsigned int	io_window_1k:1;		/* Intel bridge 1K I/O windows */
 	unsigned int	irq_managed:1;
