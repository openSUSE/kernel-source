From 44d13100c56b7cbd21aac651e51fc37db88a4c98 Mon Sep 17 00:00:00 2001
From: Oliver Neukum <oneukum@suse.com>
Date: Tue, 27 Sep 2022 11:20:20 +0200
Subject: [PATCH] usb.h: struct usb_device: hide new member
Patch-mainline: Never (kABI fixup)
References: bsc#1206664 CVE-2022-4662

Put the new member into a hole in the structure

Signed-off-by: Oliver Neukum <oneukum@suse.com>
Acked-by: Vasant Karasulli <vkarasulli@suse.de>
---
 include/linux/usb.h | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/include/linux/usb.h b/include/linux/usb.h
index 4b4556a13..c905a916e 100644
--- a/include/linux/usb.h
+++ b/include/linux/usb.h
@@ -665,7 +665,6 @@ struct usb_device {

 	unsigned can_submit:1;
 	unsigned persist_enabled:1;
-	unsigned reset_in_progress:1;
 	unsigned have_langid:1;
 	unsigned authorized:1;
 	unsigned authenticated:1;
@@ -677,6 +676,9 @@ struct usb_device {
 	unsigned usb2_hw_lpm_allowed:1;
 	unsigned usb3_lpm_u1_enabled:1;
 	unsigned usb3_lpm_u2_enabled:1;
+#ifndef __GENKSYMS__
+	unsigned reset_in_progress:1;
+#endif
 	int string_langid;

 	/* static strings from the device */
--
2.35.3

