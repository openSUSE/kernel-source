From: Lee Duncan <lduncan@suse.com>
Date: Thu Jun 24 07:48:38 PDT 2021
Subject: SCSI: ufs: fix ktime_t kabi change
Patch-mainline: never, kABI workaround
References: bsc#1187795

The patch scsi-ufs-fix-imprecise-load-calculation-in-devfreq-window
changed a kernel time value being an unsigned long to being
a ktime_t. These are the same size (64 bits), so just call
it an unsigned long for kABI checks.

Signed-off-by: Lee Duncan <lduncan@suse.com>
--- 
 drivers/scsi/ufs/ufshcd.h |    4 ++++
 1 file changed, 4 insertions(+)

--- a/drivers/scsi/ufs/ufshcd.h
+++ b/drivers/scsi/ufs/ufshcd.h
@@ -391,7 +391,11 @@ struct ufs_saved_pwr_info {
 struct ufs_clk_scaling {
 	int active_reqs;
 	unsigned long tot_busy_t;
+#ifdef __GENKSYMS__
+	unsigned long window_start_t;
+#else
 	ktime_t window_start_t;
+#endif
 	ktime_t busy_start_t;
 	struct device_attribute enable_attr;
 	struct ufs_saved_pwr_info saved_pwr_info;
