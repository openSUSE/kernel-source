From: Hannes Reinecke <hare@suse.de>
Date: Mon, 24 Nov 2025 12:33:17 +0100
Subject: KVM: s390: kABI backport for 'last_sleep_cpu'
References: bsc#1252352
Patch-Mainline: never, kABI consistency patch

Commit 352ccf890a3e ('KVM: s390: improve interrupt cpu for wakeup')
break kABI, but it's just a rename of an existing variable. So revert
the rename and keep the kABI intact.

Signed-off-by: Hannes Reinecke <hare@suse.de>
Reviewed-by: Takashi Iwai <tiwai@suse.de>
---
 arch/s390/include/asm/kvm_host.h | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/arch/s390/include/asm/kvm_host.h b/arch/s390/include/asm/kvm_host.h
index 2660e487eb7ac..b9313794ce117 100644
--- a/arch/s390/include/asm/kvm_host.h
+++ b/arch/s390/include/asm/kvm_host.h
@@ -684,7 +684,11 @@ struct kvm_s390_float_interrupt {
 	int counters[FIRQ_MAX_COUNT];
 	struct kvm_s390_mchk_info mchk;
 	struct kvm_s390_ext_info srv_signal;
+#ifndef __GENKSYMS__
 	int last_sleep_cpu;
+#else
+	int next_rr_cpu;
+#endif
 	struct mutex ais_lock;
 	u8 simm;
 	u8 nimm;
-- 
2.43.0

