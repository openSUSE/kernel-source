From: Frederic Weisbecker <fweisbecker@suse.com>
Date: Fri, 24 oct 2025 16:15:18 +0200
Subject: [PATCH] kABI: fix for struct hrtimer_cpu_base
Patch-mainline: Never, kabi work around
References: CVE-2025-21816 bsc#1238472

Upstream commit:

	53dac345395c ("hrtimers: Force migrate away hrtimers queued after CPUHP_AP_HRTIMERS_DYING")

introduced a new field at the end of struct hrtimer_cpu_base which is only used
internally by hrtimers. Modules should only access old fields and not embed
this struct anywhere.

Leave the new field at the bottom and suppress the GENKSYMS warning.

Signed-off-by: Frederic Weisbecker <fweisbecker@suse.com>
Reviewed-by: Petr Pavlu <petr.pavlu@suse.com>
---
 include/linux/hrtimer_defs.h |    2 ++
 1 file changed, 2 insertions(+)

--- a/include/linux/hrtimer_defs.h
+++ b/include/linux/hrtimer_defs.h
@@ -125,7 +125,9 @@ struct hrtimer_cpu_base {
 	ktime_t				softirq_expires_next;
 	struct hrtimer			*softirq_next_timer;
 	struct hrtimer_clock_base	clock_base[HRTIMER_MAX_CLOCK_BASES];
+#ifndef __GENKSYMS__
 	call_single_data_t		csd;
+#endif
 } ____cacheline_aligned;
 
 
