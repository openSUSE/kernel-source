From: Ben Dooks <ben.dooks@codethink.co.uk>
Date: Tue, 6 Jan 2026 23:10:54 +0000
Subject: [PATCH] trace: ftrace_dump_on_oops[] is not exported, make it static
References: bsc#1012628
Patch-mainline: 6.18.6
Git-commit: 1e2ed4bfd50ace3c4272cfab7e9aa90956fb7ae0

[ Upstream commit 1e2ed4bfd50ace3c4272cfab7e9aa90956fb7ae0 ]

The ftrace_dump_on_oops string is not used outside of trace.c so
make it static to avoid the export warning from sparse:

kernel/trace/trace.c:141:6: warning: symbol 'ftrace_dump_on_oops' was not declared. Should it be static?

Fixes: dd293df6395a2 ("tracing: Move trace sysctls into trace.c")
Link: https://patch.msgid.link/20260106231054.84270-1-ben.dooks@codethink.co.uk
Signed-off-by: Ben Dooks <ben.dooks@codethink.co.uk>
Signed-off-by: Steven Rostedt (Google) <rostedt@goodmis.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
Signed-off-by: Jiri Slaby <jslaby@suse.cz>
---
 kernel/trace/trace.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/kernel/trace/trace.c b/kernel/trace/trace.c
index ddff2af3cd3f..142e3b737f0b 100644
--- a/kernel/trace/trace.c
+++ b/kernel/trace/trace.c
@@ -141,7 +141,7 @@ cpumask_var_t __read_mostly	tracing_buffer_mask;
  * by commas.
  */
 /* Set to string format zero to disable by default */
-char ftrace_dump_on_oops[MAX_TRACER_SIZE] = "0";
+static char ftrace_dump_on_oops[MAX_TRACER_SIZE] = "0";
 
 /* When set, tracing will stop when a WARN*() is hit */
 static int __disable_trace_on_warning;
-- 
2.52.0

