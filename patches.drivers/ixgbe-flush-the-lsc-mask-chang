Ixgbe: Flush the LSC mask change to prevent repeated interrupts
Subject: ixgbe: Flush the LSC mask change to prevent repeated interrupts
References: BNC#562046
Patch-mainline: 2.6.33-rc1
Git-commit: 8a0717f30ce93a686d325122d8b0c6b73b32cfb3

From: Nelson, Shannon <shannon.nelson@intel.com>

Signed-off-by: Shannon Nelson <shannon.nelson@intel.com>
Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
Acked-by: John Jolly <jjolly@suse.de>

---

 drivers/net/ixgbe/ixgbe_main.c |    1 +
 1 file changed, 1 insertion(+)


--- a/drivers/net/ixgbe/ixgbe_main.c
+++ b/drivers/net/ixgbe/ixgbe_main.c
@@ -1207,6 +1207,7 @@ static void ixgbe_check_lsc(struct ixgbe
 	adapter->link_check_timeout = jiffies;
 	if (!test_bit(__IXGBE_DOWN, &adapter->state)) {
 		IXGBE_WRITE_REG(hw, IXGBE_EIMC, IXGBE_EIMC_LSC);
+		IXGBE_WRITE_FLUSH(hw);
 		schedule_work(&adapter->watchdog_task);
 	}
 }
