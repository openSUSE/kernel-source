Subject: Linux-RT 2.6.25.4-RT
From: http://www.kernel.org/pub/linux/kernel/projects/rt/
Acked-by: Sven-Thorsten Dietrich <sdietrich@suse.de>
Subject: [PATCH] just rename call_rcu_bh instead of making it a macro

Seems that I found a box that has a config that passes call_rcu_bh as a
function pointer (see net/sctp/sm_make_chunk.c), so declaring the
call_rcu_bh has a macro function isn't good enough.

This patch makes it just another name of call_rcu for rcupreempt.

Signed-off-by: Steven Rostedt <rostedt@goodmis.org>

---
 include/linux/rcupreempt.h |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

Index: linux-2.6.25.4-rt1/include/linux/rcupreempt.h
===================================================================
--- linux-2.6.25.4-rt1.orig/include/linux/rcupreempt.h	2008-05-17 08:26:51.000000000 -0400
+++ linux-2.6.25.4-rt1/include/linux/rcupreempt.h	2008-05-17 08:26:52.000000000 -0400
@@ -44,7 +44,13 @@
 
 #define rcu_qsctr_inc(cpu)
 #define rcu_bh_qsctr_inc(cpu)
-#define call_rcu_bh(head, rcu) call_rcu(head, rcu)
+
+/*
+ * Someone might want to pass call_rcu_bh as a function pointer.
+ * So this needs to just be a rename and not a macro function.
+ *  (no parentheses)
+ */
+#define call_rcu_bh	 	call_rcu
 
 #ifdef CONFIG_PREEMPT_RCU_BOOST
 /*
