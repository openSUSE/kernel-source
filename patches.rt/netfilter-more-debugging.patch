
doing netfilter changes and turning on netfilter debug means
we've got to interpret netfilter warning messages a bit more.

---
 include/net/netfilter/nf_conntrack.h |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

Index: linux-2.6.22/include/net/netfilter/nf_conntrack.h
===================================================================
--- linux-2.6.22.orig/include/net/netfilter/nf_conntrack.h	2007-07-24 08:56:37.000000000 +0200
+++ linux-2.6.22/include/net/netfilter/nf_conntrack.h	2007-07-24 08:57:04.000000000 +0200
@@ -63,11 +63,14 @@ union nf_conntrack_help {
 #ifdef CONFIG_NETFILTER_DEBUG
 #define NF_CT_ASSERT(x)							\
 do {									\
-	if (!(x))							\
+	if (!(x)) {							\
 		/* Wooah!  I'm tripping my conntrack in a frenzy of	\
 		   netplay... */					\
 		printk("NF_CT_ASSERT: %s:%i(%s)\n",			\
 		       __FILE__, __LINE__, __FUNCTION__);		\
+		if (printk_ratelimit())					\
+			WARN_ON(1);					\
+	}								\
 } while(0)
 #else
 #define NF_CT_ASSERT(x)
