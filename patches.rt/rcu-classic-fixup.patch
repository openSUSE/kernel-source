Subject: Linux-RT 2.6.24-rt1
From: http://www.kernel.org/pub/linux/kernel/projects/rt/
Acked-by: Sven-Thorsten Dietrich <sdietrich@suse.de>
From linux-kernel-owner@vger.kernel.org Wed May 23 04:02:20 2007
Return-Path:
	<linux-kernel-owner+tglx=40linutronix.de-S1759358AbXEWCBg@vger.kernel.org>
X-Spam-Checker-Version: SpamAssassin 3.1.7-deb (2006-10-05) on debian
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=AWL autolearn=unavailable 
	version=3.1.7-deb
Received: from vger.kernel.org (vger.kernel.org [209.132.176.167]) by
	mail.tglx.de (Postfix) with ESMTP id A9CC565C3E9 for <tglx@linutronix.de>;
	Wed, 23 May 2007 04:02:20 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand id
	S1759358AbXEWCBg (ORCPT <rfc822;tglx@linutronix.de>); Tue, 22 May 2007
	22:01:36 -0400
Received: (majordomo@vger.kernel.org) by vger.kernel.org id
	S1757035AbXEWCBa (ORCPT <rfc822;linux-kernel-outgoing>); Tue, 22 May 2007
	22:01:30 -0400
Received: from rwcrmhc13.comcast.net ([204.127.192.83]:33122 "EHLO
	rwcrmhc13.comcast.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org with
	ESMTP id S1756947AbXEWCB3 (ORCPT <rfc822;Linux-kernel@vger.kernel.org>);
	Tue, 22 May 2007 22:01:29 -0400
Received: from sx.thebigcorporation.com ([69.181.45.228]) by comcast.net
	(rwcrmhc13) with ESMTP id <20070523020129m1300c6e9qe>; Wed, 23 May 2007
	02:01:29 +0000
Received: from sx.thebigcorporation.com (localhost.localdomain [127.0.0.1])
	by sx.thebigcorporation.com (8.13.8/8.13.8) with ESMTP id l4N21Sfg030600;
	Tue, 22 May 2007 19:01:28 -0700
Received: (from sven@localhost) by sx.thebigcorporation.com
	(8.13.8/8.13.8/Submit) id l4N21SFV030599; Tue, 22 May 2007 19:01:28 -0700
X-Authentication-Warning: sx.thebigcorporation.com: sven set sender to
	sven@thebigcorporation.com using -f
Subject: [PATCH 2.6.21-rt6]
From:	Sven-Thorsten Dietrich <sven@thebigcorporation.com>
To:	LKML <Linux-kernel@vger.kernel.org>
Cc:	Ingo Molnar <mingo@elte.hu>
Content-Type: text/plain
Organization: The Big Corporation
Date:	Tue, 22 May 2007 19:01:27 -0700
Message-Id: <1179885687.25500.92.camel@sx.thebigcorporation.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6) 
Sender:	linux-kernel-owner@vger.kernel.org
Precedence: bulk
X-Mailing-List:	linux-kernel@vger.kernel.org
X-Filter-To: .Kernel.LKML
X-Evolution-Source: imap://tglx%40linutronix.de@localhost:8993/
Content-Transfer-Encoding: 8bit


Restore the declaration of rcu_batches_completed_bh

It is needed to compile with Classic RCU 

signed-off-by: Sven-Thorsten Dietrich <sven@thebigcorporation.com>


---
 include/linux/rcupdate.h |    1 +
 1 file changed, 1 insertion(+)

Index: linux-2.6.23-rc8-rt1/include/linux/rcupdate.h
===================================================================
--- linux-2.6.23-rc8-rt1.orig/include/linux/rcupdate.h	2007-09-26 14:27:23.000000000 -0400
+++ linux-2.6.23-rc8-rt1/include/linux/rcupdate.h	2007-09-26 14:27:23.000000000 -0400
@@ -227,6 +227,7 @@ extern void rcu_barrier(void);
 extern void rcu_init(void);
 extern void rcu_advance_callbacks(int cpu, int user);
 extern void rcu_check_callbacks(int cpu, int user);
+extern long rcu_batches_completed_bh(void);
 
 #endif /* __KERNEL__ */
 #endif /* __LINUX_RCUPDATE_H */
