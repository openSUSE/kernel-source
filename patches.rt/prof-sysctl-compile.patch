Subject: Linux-RT 2.6.27-RT
From: http://www.kernel.org/pub/linux/kernel/projects/rt/
Acked-by: Tony Jones <tonyj@suse.de>
Compile fix for when profiling is off

prof_pid will be an unresolved symbol if you don't enable
profiling, and the final link of the kernel will fail. Make
the sysctl conditional on the appropriate Kconfig option.

[merge me into preempt-realtime-debug-sysctl.patch]
---
 kernel/sysctl.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/kernel/sysctl.c b/kernel/sysctl.c
index 91a482a..284e599 100644
--- a/kernel/sysctl.c
+++ b/kernel/sysctl.c
@@ -378,6 +378,7 @@ static struct ctl_table kern_table[] = {
 		.proc_handler	= &proc_dointvec,
 	},
 #endif
+#ifdef CONFIG_PROFILING
 	{
 		.ctl_name	= CTL_UNNUMBERED,
 		.procname	= "prof_pid",
@@ -386,6 +387,7 @@ static struct ctl_table kern_table[] = {
 		.mode		= 0644,
 		.proc_handler	= &proc_dointvec,
 	},
+#endif
 #ifdef CONFIG_PREEMPT
 	{
 		.ctl_name	= CTL_UNNUMBERED,
