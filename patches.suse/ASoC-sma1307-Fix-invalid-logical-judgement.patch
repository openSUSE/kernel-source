From 08aa540a196a672b8597fb611e2dc25e42986bd9 Mon Sep 17 00:00:00 2001
From: Tang Bin <tangbin@cmss.chinamobile.com>
Date: Fri, 8 Nov 2024 09:16:17 +0800
Subject: [PATCH] ASoC: sma1307: Fix invalid logical judgement
Git-commit: 08aa540a196a672b8597fb611e2dc25e42986bd9
Patch-mainline: v6.13-rc1
References: jsc#PED-14430 jsc#PED-14297 jsc#PED-14024

In the function sma1307_dai_hw_params_amp, the variable
'ret' has not been assigned a value, so the logical judgement
is invalid, thus fix it.

Signed-off-by: Tang Bin <tangbin@cmss.chinamobile.com>
Link: https://patch.msgid.link/20241108011617.2284-1-tangbin@cmss.chinamobile.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/codecs/sma1307.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/sound/soc/codecs/sma1307.c b/sound/soc/codecs/sma1307.c
index 985a247b3310..81638768ac12 100644
--- a/sound/soc/codecs/sma1307.c
+++ b/sound/soc/codecs/sma1307.c
@@ -1191,7 +1191,6 @@ static int sma1307_dai_hw_params_amp(struct snd_pcm_substream *substream,
 	struct snd_soc_component *component = dai->component;
 	struct sma1307_priv *sma1307 = snd_soc_component_get_drvdata(component);
 	unsigned int bclk = 0;
-	int ret = 0;
 
 	if (sma1307->format == SND_SOC_DAIFMT_DSP_A)
 		bclk = params_rate(params) * sma1307->frame_size;
@@ -1336,8 +1335,6 @@ static int sma1307_dai_hw_params_amp(struct snd_pcm_substream *substream,
 			params_format(params));
 		return -EINVAL;
 	}
-	if (ret < 0)
-		return -EINVAL;
 
 	return 0;
 }
-- 
2.52.0

