From f0ccc717c6c64b0762f34cd1a2072bff44859423 Mon Sep 17 00:00:00 2001
From: Arnd Bergmann <arnd@arndb.de>
Date: Mon, 5 May 2025 07:21:21 +0200
Subject: [PATCH] ALSA: hda/tas2781: select CONFIG_CRC8 for SND_HDA_SCODEC_TAS2781_I2C
Git-commit: f0ccc717c6c64b0762f34cd1a2072bff44859423
Patch-mainline: v6.16-rc1
References: jsc#PED-14430 jsc#PED-14297 jsc#PED-14024

The crc8 function is used by the common fmwlib module, so this has
to be selected directly to avoid a link failure:

Error: modpost: "crc8" [sound/soc/codecs/snd-soc-tas2781-fmwlib.ko] undefined!

Fixes: 9fa6a693ad8d ("ALSA: hda/tas2781: Remove tas2781_spi_fwlib.c and leverage SND_SOC_TAS2781_FMWLIB")
Signed-off-by: Arnd Bergmann <arnd@arndb.de>
Link: https://patch.msgid.link/20250505052303.1812002-1-arnd@kernel.org
Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/codecs/Kconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/sound/soc/codecs/Kconfig b/sound/soc/codecs/Kconfig
index 2e5b03be2f20..77fb5944c6b3 100644
--- a/sound/soc/codecs/Kconfig
+++ b/sound/soc/codecs/Kconfig
@@ -2002,6 +2002,7 @@ config SND_SOC_TAS2781_COMLIB_I2C
 
 config SND_SOC_TAS2781_FMWLIB
 	select SND_SOC_TAS2781_COMLIB
+	select CRC8
 	tristate
 	default n
 
-- 
2.52.0

