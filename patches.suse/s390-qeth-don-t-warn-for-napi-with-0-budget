From: Julian Wiedmann <jwi@linux.ibm.com>
Date: Thu, 20 Feb 2020 15:54:55 +0100
Subject: s390/qeth: don't warn for napi with 0 budget
Git-commit: 420579dba126c6111b5a3dea062f21a7e4e647c6
Patch-mainline: v5.6-rc3
References: git-fixes

Calling napi->poll() with 0 budget is a legitimate use by netpoll.

Fixes: a1c3ed4c9ca0 ("qeth: NAPI support for l2 and l3 discipline")
Signed-off-by: Julian Wiedmann <jwi@linux.ibm.com>
Signed-off-by: David S. Miller <davem@davemloft.net>
[ ptesarik: SLE15-SP2 does not contain upstream commit
  c04b116a2866b3e3a6b909a576769ccde3d622ac, so qeth_l2 and qeth_l3
  must be patched separately. ]
Signed-off-by: Petr Tesarik <ptesarik@suse.com>
---
 drivers/s390/net/qeth_l2_main.c |    1 -
 drivers/s390/net/qeth_l3_main.c |    1 -
 2 files changed, 2 deletions(-)

--- a/drivers/s390/net/qeth_l2_main.c
+++ b/drivers/s390/net/qeth_l2_main.c
@@ -307,7 +307,6 @@ static int qeth_l2_process_inbound_buffe
 	unsigned int len;
 
 	*done = 0;
-	WARN_ON_ONCE(!budget);
 	while (budget) {
 		skb = qeth_core_get_next_skb(card,
 			&card->qdio.in_q->bufs[card->rx.b_index],
--- a/drivers/s390/net/qeth_l3_main.c
+++ b/drivers/s390/net/qeth_l3_main.c
@@ -1264,7 +1264,6 @@ static int qeth_l3_process_inbound_buffe
 	struct qeth_hdr *hdr;
 
 	*done = 0;
-	WARN_ON_ONCE(!budget);
 	while (budget) {
 		skb = qeth_core_get_next_skb(card,
 			&card->qdio.in_q->bufs[card->rx.b_index],
