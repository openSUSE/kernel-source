From 0109ee00788e0ad7b888a799c26b5a93b343876b Mon Sep 17 00:00:00 2001
From: Mario Limonciello <mario.limonciello@amd.com>
Date: Sun, 17 Nov 2024 20:55:27 -0600
Subject: [PATCH] ASoC: amd: Fix build dependencies for `SND_SOC_AMD_PS`
Git-commit: 0109ee00788e0ad7b888a799c26b5a93b343876b
Patch-mainline: v6.13-rc1
References: jsc#PED-14430 jsc#PED-14297 jsc#PED-14024

The pci-ps module now must have `SND_SOC_ACPI_AMD_MATCH` selected
to reference the `snd_soc_acpi_amd_acp63_sdw_machines` symbol.

Fixes: 56d540befd59 ("ASoC: amd: ps: add soundwire machines for acp6.3 platform")
Cc: Vijendar.Mukunda@amd.com
Reported-by: kernel test robot <lkp@intel.com>
Closes: https://lore.kernel.org/oe-kbuild-all/202411180658.mIeWje2V-lkp@intel.com/
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Link: https://patch.msgid.link/20241118025527.3318493-1-superm1@kernel.org
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/amd/Kconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/sound/soc/amd/Kconfig b/sound/soc/amd/Kconfig
index 6dec44f516c1..c7590d4989bb 100644
--- a/sound/soc/amd/Kconfig
+++ b/sound/soc/amd/Kconfig
@@ -163,6 +163,7 @@ config SND_SOC_AMD_SOUNDWIRE
 config SND_SOC_AMD_PS
         tristate "AMD Audio Coprocessor-v6.3 Pink Sardine support"
 	select SND_SOC_AMD_SOUNDWIRE_LINK_BASELINE
+	select SND_SOC_ACPI_AMD_MATCH
         depends on X86 && PCI && ACPI
         help
           This option enables Audio Coprocessor i.e ACP v6.3 support on
-- 
2.52.0

