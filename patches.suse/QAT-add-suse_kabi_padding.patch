From 8ff10423dfefe455d86d63dba6bb26f13af5ceb3 Mon Sep 17 00:00:00 2001
From: Oliver Neukum <oneukum@suse.com>
Date: Mon, 16 Nov 2020 13:19:57 +0100
Subject: [PATCH 1/2] QAT: add suse_kabi_padding
References: jsc#SLE-14454
Patch-mainline: Never (kABI padding)

This adds kABI padding to the headers of QAT.
That is supposed to provide reserve fields for
later backporting so that the kABI is not altered
in a harmfull manner.

Signed-off-by: Oliver Neukum <oneukum@suse.com>
---
 drivers/crypto/qat/qat_common/qat_algs.c   |    4 ++++
 drivers/crypto/qat/qat_common/qat_crypto.h |    4 ++++
 2 files changed, 8 insertions(+)

--- a/drivers/crypto/qat/qat_common/qat_algs.c
+++ b/drivers/crypto/qat/qat_common/qat_algs.c
@@ -89,6 +89,8 @@ struct qat_alg_aead_ctx {
 	};
 	char ipad[SHA512_BLOCK_SIZE]; /* sufficient for SHA-1/SHA-256 as well */
 	char opad[SHA512_BLOCK_SIZE];
+
+	void *suse_kabi_padding;
 };
 
 struct qat_alg_skcipher_ctx {
@@ -103,6 +105,8 @@ struct qat_alg_skcipher_ctx {
 	struct crypto_cipher *tweak;
 	bool fallback;
 	int mode;
+
+	void *suse_kabi_padding;
 };
 
 static int qat_get_inter_state_size(enum icp_qat_hw_auth_algo qat_hash_alg)
--- a/drivers/crypto/qat/qat_common/qat_crypto.h
+++ b/drivers/crypto/qat/qat_common/qat_crypto.h
@@ -19,6 +19,8 @@ struct qat_crypto_instance {
 	unsigned long state;
 	int id;
 	atomic_t refctr;
+
+	void *suse_kabi_padding;
 };
 
 struct qat_crypto_request_buffs {
@@ -53,6 +55,8 @@ struct qat_crypto_request {
 		u8 iv[AES_BLOCK_SIZE];
 	};
 	bool encryption;
+
+	void *suse_kabi_padding;
 };
 
 static inline bool adf_hw_dev_has_crypto(struct adf_accel_dev *accel_dev)
