From: Ian Kent <raven@themaw.net>
Date: Fri, 4 Aug 2023 13:33:18 +0800
Subject: [PATCH] autofs: use wake_up() instead of wake_up_interruptible(()
Git-commit: 17fce12e7c0a53f0bed26af231a2a98a34d34c60
Patch-mainline: v6.6
References: bsc#1224166

In autofs_wait_release() wake_up() is used to wake up processes waiting
on a mount callback to complete which matches the wait_event_killable()
in autofs_wait().

But in autofs_catatonic_mode() the wake_up_interruptible() was not also
changed at the time autofs_wait_release() was changed.

Signed-off-by: Ian Kent <raven@themaw.net>
Message-id: <169112719813.7590.4971499386839952992.stgit@donald.themaw.net>
Signed-off-by: Christian Brauner <brauner@kernel.org>
Acked-by: NeilBrown <neilb@suse.com>

---
 fs/autofs/waitq.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- a/fs/autofs/waitq.c
+++ b/fs/autofs/waitq.c
@@ -32,7 +32,7 @@ void autofs_catatonic_mode(struct autofs
 		wq->status = -ENOENT; /* Magic is gone - report failure */
 		kfree(wq->name.name - wq->offset);
 		wq->name.name = NULL;
-		wake_up_interruptible(&wq->queue);
+		wake_up(&wq->queue);
 		if (!--wq->wait_ctr)
 			kfree(wq);
 		wq = nwq;
