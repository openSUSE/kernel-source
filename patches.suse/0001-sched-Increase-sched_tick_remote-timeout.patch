From eb22d32e553dae5756b7dd02bc61c213e68ca627 Mon Sep 17 00:00:00 2001
From: Marco Crivellari <marco.crivellari@suse.com>
Date: Fri, 5 Dec 2025 16:53:24 +0100
Subject: [PATCH] sched: Increase sched_tick_remote timeout
Patch-mainline: 6.18
Git-commit: aaab6bb54ab9bc4c37ff33b816031918d2760517
References: bsc#1254510
Signed-off-by: Marco Crivellari <marco.crivellari@suse.com>

Increase the sched_tick_remote WARN_ON timeout to remove false
positives due to temporarily busy HK cpus. The suggestion
was 30 seconds to catch really stuck remote tick processing
but not trigger it too easily.

Suggested-by: Frederic Weisbecker <frederic@kernel.org>
Signed-off-by: Phil Auld <pauld@redhat.com>
Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>
Acked-by: Frederic Weisbecker <frederic@kernel.org>
Link: https://patch.msgid.link/20250911161300.437944-1-pauld@redhat.com
---
 kernel/sched/core.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/kernel/sched/core.c b/kernel/sched/core.c
index 505365a5a0523..960a2ebd6fe16 100644
--- a/kernel/sched/core.c
+++ b/kernel/sched/core.c
@@ -5853,7 +5853,7 @@ static void sched_tick_remote(struct work_struct *work)
 		 * amount of time.
 		 */
 		delta = rq_clock_task(rq) - curr->se.exec_start;
-		WARN_ON_ONCE(delta > (u64)NSEC_PER_SEC * 3);
+		WARN_ON_ONCE(delta > (u64)NSEC_PER_SEC * 30);
 	}
 	curr->sched_class->task_tick(rq, curr, 0);
 
-- 
2.52.0

