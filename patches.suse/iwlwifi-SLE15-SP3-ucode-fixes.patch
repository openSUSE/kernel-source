From: Takashi Iwai <tiwai@suse.de>
Subject: iwlwifi: Fix MODULE_FIRMWARE() ucode definitions for SLE15-SP3
Patch-mainline: Never, SLE15-SP3 only
References: bsc#1183860

It seems that kernel-firmware package on SLE15-SP3 never contains *-56
ucode but only *-55 version for 22000 chips, while the driver declares
with the non-existing *-56 ucode with MODULE_FIRMARE().  This leads to
the broken WiFi setup on the installer image that takes only the
firmware files that are declared by the kernel modules.

Correct the IWL_22000_UCODE_API_MAX value to 55, the value matching
with the current setup.

Signed-off-by: Takashi Iwai <tiwai@suse.de>

---
 drivers/net/wireless/intel/iwlwifi/cfg/22000.c |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

--- a/drivers/net/wireless/intel/iwlwifi/cfg/22000.c
+++ b/drivers/net/wireless/intel/iwlwifi/cfg/22000.c
@@ -57,7 +57,13 @@
 #include "iwl-prph.h"
 
 /* Highest firmware API version supported */
-#define IWL_22000_UCODE_API_MAX	56
+/* FIXME: corrected from 56 to 55 here for SLE15-SP3, as the kernel-firmware
+ * package on SLE15-SP3 never provides *-56 ucode (bsc#1183860)
+ * Once when the package provides the right firmware, we may restore the
+ * original value again.
+ */
+/* #define IWL_22000_UCODE_API_MAX	56 */
+#define IWL_22000_UCODE_API_MAX	55
 
 /* Lowest firmware API version supported */
 #define IWL_22000_UCODE_API_MIN	39
