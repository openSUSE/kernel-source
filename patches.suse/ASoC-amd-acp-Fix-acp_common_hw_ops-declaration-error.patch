From 77ad261ecc4aa1b09bc98b32cdbfadb5e92197b7 Mon Sep 17 00:00:00 2001
From: Venkata Prasad Potturu <venkataprasad.potturu@amd.com>
Date: Mon, 17 Mar 2025 12:54:09 +0530
Subject: [PATCH] ASoC: amd: acp: Fix acp_common_hw_ops declaration error
Git-commit: 77ad261ecc4aa1b09bc98b32cdbfadb5e92197b7
Patch-mainline: v6.15-rc1
References: jsc#PED-14430 jsc#PED-14297 jsc#PED-14024

Fix acp_common_hw_ops declaration error by adding static and
remove export symbol.
Sparse: symbol 'acp_common_hw_ops' was not declared. Should it be static?

Fixes: 8ae746fe5104 ("ASoC: amd: acp: Implement acp_common_hw_ops support for acp platforms")

Reported-by: kernel test robot <lkp@intel.com>
Closes: https://lore.kernel.org/oe-kbuild-all/202503141442.iT0LHEMx-lkp@intel.com/
Signed-off-by: Venkata Prasad Potturu <venkataprasad.potturu@amd.com>
Link: https://patch.msgid.link/20250317072413.88971-3-venkataprasad.potturu@amd.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/amd/acp/acp-legacy-common.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/sound/soc/amd/acp/acp-legacy-common.c b/sound/soc/amd/acp/acp-legacy-common.c
index 5fad6c4a8d86..b4d68484e06d 100644
--- a/sound/soc/amd/acp/acp-legacy-common.c
+++ b/sound/soc/amd/acp/acp-legacy-common.c
@@ -67,7 +67,7 @@ struct acp_resource acp70_rsrc = {
 };
 EXPORT_SYMBOL_NS_GPL(acp70_rsrc, SND_SOC_ACP_COMMON);
 
-const struct snd_acp_hw_ops acp_common_hw_ops = {
+static const struct snd_acp_hw_ops acp_common_hw_ops = {
 	/* ACP hardware initilizations */
 	.acp_init = acp_init,
 	.acp_deinit = acp_deinit,
@@ -77,7 +77,6 @@ const struct snd_acp_hw_ops acp_common_hw_ops = {
 	.en_interrupts = acp_enable_interrupts,
 	.dis_interrupts = acp_disable_interrupts,
 };
-EXPORT_SYMBOL_NS_GPL(acp_common_hw_ops, SND_SOC_ACP_COMMON);
 
 irqreturn_t acp_irq_handler(int irq, void *data)
 {
-- 
2.52.0

