From 3ba089953fb2f479c4bea14277a146c1e5ba0b7f Mon Sep 17 00:00:00 2001
From: Chris Wilson <chris@chris-wilson.co.uk>
Date: Tue, 12 Nov 2019 16:36:43 +0000
Subject: drm/i915/selftests: Remove unused local variable 'file'
Git-commit: 8c388ac8f1866e61a811a81eb8bff429f3865512
Patch-mainline: v5.6-rc1
References: jsc#SLE-12680, jsc#SLE-12880, jsc#SLE-12882, jsc#SLE-12883, jsc#SLE-13496, jsc#SLE-15322

drivers/gpu/drm/i915/gem/selftests/i915_gem_object_blt.c:453 igt_threaded_blt() error: uninitialized symbol 'file'.

Fixes: 34485832cb98 ("drm/i915/selftests: Exercise parallel blit operations on a single ctx")
Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
Cc: Matthew Auld <matthew.auld@intel.com>
Reviewed-by: Matthew Auld <matthew.auld@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20191112163643.3527-1-chris@chris-wilson.co.uk
Signed-off-by: Patrik Jakobsson <pjakobsson@suse.de>
---
 drivers/gpu/drm/i915/gem/selftests/i915_gem_object_blt.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/i915/gem/selftests/i915_gem_object_blt.c b/drivers/gpu/drm/i915/gem/selftests/i915_gem_object_blt.c
index c8a8c07e07ab..675c1a20a2f1 100644
--- a/drivers/gpu/drm/i915/gem/selftests/i915_gem_object_blt.c
+++ b/drivers/gpu/drm/i915/gem/selftests/i915_gem_object_blt.c
@@ -435,7 +435,6 @@ static int igt_threaded_blt(struct drm_i915_private *i915,
 	struct task_struct **tsk;
 	unsigned int n_cpus, i;
 	I915_RND_STATE(prng);
-	struct file *file;
 	int err = 0;
 
 	n_cpus = num_online_cpus() + 1;
@@ -450,7 +449,7 @@ static int igt_threaded_blt(struct drm_i915_private *i915,
 
 	thread[0].file = mock_file(i915);
 	if (IS_ERR(thread[0].file)) {
-		err = PTR_ERR(file);
+		err = PTR_ERR(thread[0].file);
 		goto out_thread;
 	}
 
-- 
2.28.0

