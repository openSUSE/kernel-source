From 8778837f0a5b7c1bc5dbf0cccd7619fec6981588 Mon Sep 17 00:00:00 2001
From: Alexander Stein <alexander.stein@ew.tq-group.com>
Date: Wed, 16 Jul 2025 08:57:07 +0200
Subject: [PATCH] ASoC: codec: tlv320aic32x4: Fix reset GPIO check
Git-commit: 8778837f0a5b7c1bc5dbf0cccd7619fec6981588
Patch-mainline: v6.17-rc1
References: jsc#PED-14430 jsc#PED-14297 jsc#PED-14024

rstn_gpio being a GPIO descriptor the check is wrong (inverted) for
releasing the reset of the codec.

Fixes: 790d5f8ee6f2 ("ASoC: codec: tlv320aic32x4: Convert to GPIO descriptors")
Signed-off-by: Alexander Stein <alexander.stein@ew.tq-group.com>
Reviewed-by: Peng Fan <peng.fan@nxp.com>
Link: https://patch.msgid.link/20250716065708.4041153-1-alexander.stein@ew.tq-group.com
Signed-off-by: Mark Brown <broonie@kernel.org>
Acked-by: Takashi Iwai <tiwai@suse.de>

---
 sound/soc/codecs/tlv320aic32x4.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/sound/soc/codecs/tlv320aic32x4.c b/sound/soc/codecs/tlv320aic32x4.c
index 3b89980e9bcf..7399080f8580 100644
--- a/sound/soc/codecs/tlv320aic32x4.c
+++ b/sound/soc/codecs/tlv320aic32x4.c
@@ -1388,7 +1388,7 @@ int aic32x4_probe(struct device *dev, struct regmap *regmap,
 		return ret;
 	}
 
-	if (!aic32x4->rstn_gpio) {
+	if (aic32x4->rstn_gpio) {
 		ndelay(10);
 		/* deassert reset */
 		gpiod_set_value_cansleep(aic32x4->rstn_gpio, 0);
-- 
2.52.0

