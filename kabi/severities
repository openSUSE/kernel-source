# KABI rules for symbols and modules
#
# A matching line with PASS allows kabi changes for given modules or symbols,
# FAIL causes an error. The first matching line is considered, the default is
# FAIL if no match is found.
#
# A pattern that contains slashes is matched against the module name a given
# symbol is exported from. The special pattern "vmlinux" matches built-in
# symbols. All other patterns match against symbol names.

drivers/message/fusion/*	PASS
drivers/staging/*		PASS

# ceph-related modules
net/ceph/libceph		PASS
drivers/block/rbd		PASS
fs/ceph				PASS
drivers/target/target_core_rbd	PASS

# IOMMU related modules and symbols
get_dev_data			PASS

# IBM Z internal symbols
# Cf. bsc#894391 / LTC#115441 and bsc#1134730 / LTC#173388
arch/s390/*			PASS
drivers/s390/*			PASS
net/iucv/*			PASS
airq_iv_*			PASS
ccw_device_*			PASS
ccw_driver_*			PASS
get_ccwdev_*			PASS
zpci_*				PASS
register_adapter_interrupt	PASS
unregister_adapter_interrupt	PASS
enable_cmf			PASS
disable_cmf			PASS
cmf_read			PASS
cmf_readall			PASS
sclp				PASS

# mlx5 internal symbols
drivers/net/ethernet/mellanox/mlx5/*	PASS

drivers/nvme/host/nvme-fc*	FAIL
drivers/nvme/host/*		PASS
drivers/nvme/target/*		PASS

# qla2xxx only has local symbols
drivers/scsi/qla2xxx/*		PASS
# mscc/ocelot only has local symbols
drivers/net/ethernet/mscc/*     PASS
# stmmac local symbols
drivers/net/ethernet/stmicro/stmmac/* PASS
# local symbols in iwlwifi
drivers/net/wireless/intel/iwlwifi/* PASS
# ath9k local symbols
drivers/net/wireless/ath/ath9k/* PASS

# local symbols
sound/soc/rockchip/*		PASS
# not used externally, mark it pass in
# order to catch any wrong use bsc#1193767
drivers/tee/tee			PASS

# only used in meson driver (bsc#1206399 CVE-2022-3112)
amvdec_add_ts_reorder		PASS

srso_untrain_ret_alias PASS
zen_untrain_ret PASS

# added by a rwsem backport (bsc#1207270 jsc#PED-4567), which was then reverted
down_read_killable_nested	PASS
down_read_interruptible		PASS

# This is purely CPU mitigation-related
mds_user_clear PASS

